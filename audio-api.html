<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Buscador iTunes</title>
</head>
<body>

  <h2>Buscador de música (iTunes API)</h2>

  <input type="text" id="searchInput" placeholder="Escribe un artista o canción">
  <button id="searchBtn">Buscar</button>

  <ul id="results"></ul>

<script>
  document.getElementById("searchBtn").addEventListener("click", function () {
    const query = document.getElementById("searchInput").value.trim();
    const resultsList = document.getElementById("results");
    resultsList.innerHTML = ""; // Limpiar resultados anteriores

    if (!query) {
      resultsList.innerHTML = "<li>Escribe algo para buscar.</li>";
      return;
    }

    const url = `https://itunes.apple.com/search?term=${encodeURIComponent(query)}&entity=song&limit=10`;

    fetch(url)
      .then(res => res.json())
      .then(data => {
        if (data.results.length === 0) {
          resultsList.innerHTML = "<li>No se encontraron resultados.</li>";
          return;
        }

        data.results.forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = `
            <strong>${item.trackName}</strong> — ${item.artistName}
            <br>
            <audio controls src="${item.previewUrl}"></audio>
          `;
          resultsList.appendChild(li);
        });
      })
      .catch(err => {
        resultsList.innerHTML = "<li>Error al buscar datos.</li>";
        console.error(err);
      });
  });
</script>

</body>
</html>
